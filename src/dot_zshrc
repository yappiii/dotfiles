# dependencies
## env
export STARSHIP_CONFIG=~/.starship/config.toml
export PATH=$NPM_CONFIG_PREFIX:$PATH

export PATH=$PATH:$HOME/.cargo/bin
export PATH=$PATH:/opt/homebrew/bin
export GOPATH=$HOME/go
export PATH=$PATH:$GOPATH/bin

# load prompt
# autoload -U promptinit; promptinit
# prompt pure

# completion
autoload -Uz compinit; compinit

# list completion
setopt auto_list

# switch completion sequential
setopt auto_menu

# easy cd
setopt auto_cd

# key bind
bindkey -v

# ECSの待ち時間
KEYTIMEOUT=10

# Backspace の挙動を「何でも消す」vimっぽい動作に変更
# 端末によって Backspace が ^H or ^? どちらかになるので両方
bindkey '^H' backward-delete-char
bindkey '^?' backward-delete-char

# history
export LANG=ja_JP.UTF-8
HISTFILE=$HOME/.zsh-history
HISTSIZE=1000000
SAVEHIST=1000000

# usable another terminal history
setopt share_history

eval "$(starship init zsh)"
export LDFLAGS="-L/usr/local/opt/zlib/lib"
export CPPFLAGS="-I/usr/local/opt/zlib/include"
export PKG_CONFIG_PATH="/usr/local/opt/zlib/lib/pkgconfig"
eval "$(direnv hook zsh)"
eval "$(mise activate zsh)"

# docker aliases
alias dockerexec='docker exec -it $(docker ps | peco | awk "{print \$1}") /bin/bash'
alias dockerstop='docker ps | peco | awk "{print \$1}" | xargs docker stop'
alias gitcheckout='git branch | peco | awk "{print \$1}" | xargs git checkout'
alias gitbranchd='git branch | peco | awk "{print \$1}" | xargs git branch -D'

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

if [ -d "$HOME/.zshrc.d" ]; then
  for conf in "$HOME/.zshrc.d/"*.zsh; do
    [ -e "$conf" ] || break
    source "${conf}"
  done
fi

# Fig post block. Keep at the bottom of this file.
[[ -f "$HOME/.fig/shell/zshrc.post.zsh" ]] && builtin source "$HOME/.fig/shell/zshrc.post.zsh"
